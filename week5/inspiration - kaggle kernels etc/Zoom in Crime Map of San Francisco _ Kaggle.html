<!DOCTYPE html>
<html>
<head>
    <title>Interactive Crime Map of San Francisco | Kaggle</title>
    <meta charset="utf-8" />
    <meta name="robots" content="index, follow"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">    <meta name="theme-color" content="#008ABC" />
    <link rel="dns-prefetch" href="https://www.google-analytics.com" /><link rel="dns-prefetch" href="https://stats.g.doubleclick.net" /><link rel="dns-prefetch" href="https://js.intercomcdn.com" /><link rel="preload" href="https://az416426.vo.msecnd.net/scripts/a/ai.0.js" as=script /><link rel="dns-prefetch" href="https://kaggle2.blob.core.windows.net" />
    <link href="/content/v/d420a040e581/kaggle/favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <link rel="manifest" href="/static/json/manifest.json">
    <link href="//fonts.googleapis.com/css?family=Open+Sans:400,300,300italic,400italic,600,600italic,700,700italic" rel='stylesheet' type='text/css'>
                <link rel="stylesheet" type="text/css" href="/static/assets/vendor.css?v=72f4ef2ebe4f"/>
        <link rel="stylesheet" type="text/css" href="/static/assets/app.css?v=7b8258d418c0"/>
        <script>
            
            (function () {
                var originalError = window.onerror;

                window.onerror = function (message, url, lineNumber, columnNumber, error) {
                    var handled = originalError && originalError(message, url, lineNumber, columnNumber, error);
                    var blockedByCors = message && message.toLowerCase().indexOf("script error") >= 0;
                    return handled || blockedByCors;
                };
            })();
        </script>
    <script>
        var appInsights=window.appInsights||function(config){
        function i(config){t[config]=function(){var i=arguments;t.queue.push(function(){t[config].apply(t,i)})}}var t={config:config},u=document,e=window,o="script",s="AuthenticatedUserContext",h="start",c="stop",l="Track",a=l+"Event",v=l+"Page",y=u.createElement(o),r,f;y.src=config.url||"https://az416426.vo.msecnd.net/scripts/a/ai.0.js";u.getElementsByTagName(o)[0].parentNode.appendChild(y);try{t.cookie=u.cookie}catch(p){}for(t.queue=[],t.version="1.0",r=["Event","Exception","Metric","PageView","Trace","Dependency"];r.length;)i("track"+r.pop());return i("set"+s),i("clear"+s),i(h+a),i(c+a),i(h+v),i(c+v),i("flush"),config.disableExceptionTracking||(r="onerror",i("_"+r),f=e[r],e[r]=function(config,i,u,e,o){var s=f&&f(config,i,u,e,o);return s!==!0&&t["_"+r](config,i,u,e,o),s}),t
        }({
            instrumentationKey:"5b3d6014-f021-4304-8366-3cf961d5b90f",
            disableAjaxTracking: true
        });
        window.appInsights=appInsights;
        appInsights.trackPageView();
    </script>
    
    
    
 
    
    <script>
    window.ga = window.ga || function () { (ga.q = ga.q || []).push(arguments) }; ga.l = +new Date;
    ga('create', 'UA-12629138-1', 'auto');
    ga('set', 'displayFeaturesTask', null);
    ga('send', 'pageview');
    </script>
    <script async src="https://www.google-analytics.com/analytics.js"></script>

    
<script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
            n.callMethod.apply(n,arguments):n.queue.push(arguments)};
        if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
        n.queue=[];t=b.createElement(e);t.async=!0;
        t.src=v;s=b.getElementsByTagName(e)[0];
        s.parentNode.insertBefore(t,s)}(window,document,'script',
        'https://connect.facebook.net/en_US/fbevents.js');
    fbq("set", "autoConfig", "false", "136809193586742");
    fbq('init', '136809193586742'); 
    fbq('track', 'PageView');
</script>
<noscript>
    <img height="1" width="1" src="https://www.facebook.com/tr?id=136809193586742&ev=PageView&noscript=1"/>
</noscript>

    

    <script>
          window.intercomSettings = {
            app_id: "koj6gxx6"
          };
    </script>
<script>(function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',intercomSettings);}else{var d=document;var i=function(){i.c(arguments)};i.q=[];i.c=function(args){i.q.push(args)};w.Intercom=i;function l(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/koj6gxx6';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);}if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})()</script>
    
    
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@kaggledatasets" />
        <meta name="twitter:creator" content="@apapiu" />
    <meta name="og:url" content="https://www.kaggle.com/apapiu/function-for-interactive-map" />
    <meta name="og:title" content="Interactive Crime Map of San Francisco" />
    <meta name="og:description" content="Using data from San Francisco Crime Classification" />
    <meta name="og:image" content="https://www.kaggle.com/static/images/no-datasource.png" />


    
    

    <script src="/static/assets/manifest.js?v=47a28ec84654"></script>
<script src="/static/assets/vendor.js?v=b83f9046871b"></script>
</head>
<body>
    







<div class="site-layout">
        <div class="site-layout__header">
            <div data-component-name="SiteHeaderContainer"></div><script>var Kaggle=window.Kaggle||{};Kaggle.State=Kaggle.State||[];Kaggle.State.push({});performance && performance.mark && performance.mark("SiteHeaderContainer.componentCouldBootstrap");</script>
        </div>

    <div class="site-layout__main-content">
        


<div data-component-name="ScriptViewer"></div><script>var Kaggle=window.Kaggle||{};Kaggle.State=Kaggle.State||[];Kaggle.State.push({"pageMessages":[],"log":"{\u0022stream_name\u0022:\u0022stdout\u0022,\u0022time\u0022:\u00220:00:00.531793\u0022,\u0022data\u0022:\u0022\\n\u0022},{\u0022stream_name\u0022:\u0022stdout\u0022,\u0022time\u0022:\u00220:00:00.531951\u0022,\u0022data\u0022:\u0022\\n\u0022},{\u0022stream_name\u0022:\u0022stdout\u0022,\u0022time\u0022:\u00220:00:00.531992\u0022,\u0022data\u0022:\u0022processing file: script.Rmd\\n\u0022},{\u0022stream_name\u0022:\u0022stdout\u0022,\u0022time\u0022:\u00220:00:00.537289\u0022,\u0022data\u0022:\u0022\\r  |                                                                       \\r  |                                                                 |   0%\\r  |                                                                       \\r  |................................                                 |  50%\\n\u0022},{\u0022stream_name\u0022:\u0022stdout\u0022,\u0022time\u0022:\u00220:00:00.537591\u0022,\u0022data\u0022:\u0022  ordinary text without R code\\n\u0022},{\u0022stream_name\u0022:\u0022stdout\u0022,\u0022time\u0022:\u00220:00:00.537680\u0022,\u0022data\u0022:\u0022\\n\u0022},{\u0022stream_name\u0022:\u0022stdout\u0022,\u0022time\u0022:\u00220:00:00.538142\u0022,\u0022data\u0022:\u0022\\r  |                                                                       \\r  |.................................................................| 100%\\n\u0022},{\u0022stream_name\u0022:\u0022stdout\u0022,\u0022time\u0022:\u00220:00:00.582416\u0022,\u0022data\u0022:\u0022label: unnamed-chunk-1 (with options) \\n\u0022},{\u0022stream_name\u0022:\u0022stdout\u0022,\u0022time\u0022:\u00220:00:00.585819\u0022,\u0022data\u0022:\u0022List of 1\\n\u0022},{\u0022stream_name\u0022:\u0022stdout\u0022,\u0022time\u0022:\u00220:00:00.588808\u0022,\u0022data\u0022:\u0022 $ message: logi FALSE\\n\u0022},{\u0022stream_name\u0022:\u0022stdout\u0022,\u0022time\u0022:\u00220:00:00.588961\u0022,\u0022data\u0022:\u0022\\n\u0022},{\u0022stream_name\u0022:\u0022stdout\u0022,\u0022time\u0022:\u00220:00:01.193277\u0022,\u0022data\u0022:\u0022\\n\u0022},{\u0022stream_name\u0022:\u0022stdout\u0022,\u0022time\u0022:\u00220:00:01.193388\u0022,\u0022data\u0022:\u0022Attaching package: \u0027dplyr\u0027\\n\u0022},{\u0022stream_name\u0022:\u0022stdout\u0022,\u0022time\u0022:\u00220:00:01.193426\u0022,\u0022data\u0022:\u0022\\n\u0022},{\u0022stream_name\u0022:\u0022stdout\u0022,\u0022time\u0022:\u00220:00:01.194385\u0022,\u0022data\u0022:\u0022The following objects are masked from \u0027package:stats\u0027:\\n\u0022},{\u0022stream_name\u0022:\u0022stdout\u0022,\u0022time\u0022:\u00220:00:01.194451\u0022,\u0022data\u0022:\u0022\\n\u0022},{\u0022stream_name\u0022:\u0022stdout\u0022,\u0022time\u0022:\u00220:00:01.194488\u0022,\u0022data\u0022:\u0022    filter, lag\\n\u0022},{\u0022stream_name\u0022:\u0022stdout\u0022,\u0022time\u0022:\u00220:00:01.194519\u0022,\u0022data\u0022:\u0022\\n\u0022},{\u0022stream_name\u0022:\u0022stdout\u0022,\u0022time\u0022:\u00220:00:01.201190\u0022,\u0022data\u0022:\u0022The following objects are masked from \u0027package:base\u0027:\\n\u0022},{\u0022stream_name\u0022:\u0022stdout\u0022,\u0022time\u0022:\u00220:00:01.201256\u0022,\u0022data\u0022:\u0022\\n\u0022},{\u0022stream_name\u0022:\u0022stdout\u0022,\u0022time\u0022:\u00220:00:01.201292\u0022,\u0022data\u0022:\u0022    intersect, setdiff, setequal, union\\n\u0022},{\u0022stream_name\u0022:\u0022stdout\u0022,\u0022time\u0022:\u00220:00:01.201322\u0022,\u0022data\u0022:\u0022\\n\u0022},{\u0022stream_name\u0022:\u0022stdout\u0022,\u0022time\u0022:\u00220:00:18.014459\u0022,\u0022data\u0022:\u0022\\n\u0022},{\u0022stream_name\u0022:\u0022stdout\u0022,\u0022time\u0022:\u00220:00:18.015761\u0022,\u0022data\u0022:\u0022output file: /kaggle/working/script.knit.md\\n\u0022},{\u0022stream_name\u0022:\u0022stdout\u0022,\u0022time\u0022:\u00220:00:18.015813\u0022,\u0022data\u0022:\u0022\\n\u0022},{\u0022stream_name\u0022:\u0022stdout\u0022,\u0022time\u0022:\u00220:00:18.078177\u0022,\u0022data\u0022:\u0022/usr/local/bin/pandoc +RTS -K512m -RTS /kaggle/working/script.utf8.md --to html --from markdown+autolink_bare_uris+ascii_identifiers+tex_math_single_backslash-implicit_figures --output /kaggle/working/__results__.html --smart --email-obfuscation none --standalone --section-divs --template /usr/local/lib/R/site-library/rmarkdown/rmd/h/default.html --variable \u0027theme:bootstrap\u0027 --include-in-header /tmp/RtmpFhJQCn/rmarkdown-str818084489.html --mathjax --variable \u0027mathjax-url:https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML\u0027 --no-highlight --variable highlightjs=__results___files/highlight \\n\u0022},{\u0022stream_name\u0022:\u0022stdout\u0022,\u0022time\u0022:\u00220:00:18.118164\u0022,\u0022data\u0022:\u0022\\n\u0022},{\u0022stream_name\u0022:\u0022stdout\u0022,\u0022time\u0022:\u00220:00:18.118259\u0022,\u0022data\u0022:\u0022Output created: __results__.html\\n\u0022}]","code":"Below is a function that outputs an interactive map of San Francisco using the [leaflet](https://rstudio.github.io/leaflet/) package.\n\nThe two variables of the function are:\n\n- `categories` = types of crimes you want to see  \n- `n` = the number of instances to be plotted on the map.\n\nYou can also control the different aesthetics of the map from within `addCircleMarkers` \n- for example `radius` changes the size of the circles.\n\n```{r, message = FALSE}\nlibrary(RColorBrewer)\nlibrary(leaflet)\nlibrary(dplyr)\n\ncrimes \u003c- read.csv(\u0022../input/train.csv\u0022) \n\ncrime.map \u003c- function(categories, n) {\n\n    new.crimes \u003c- filter(crimes, Category %in% categories) %\u003e% droplevels() \n    \n    pal \u003c- colorFactor(brewer.pal(length(unique(new.crimes$Category)), \u0022Set1\u0022),\n                       domain = new.crimes$Category)\n\n    leaflet(new.crimes[1:n,]) %\u003e% \n        addProviderTiles(\u0022CartoDB.Positron\u0022) %\u003e% \n        addCircleMarkers (lng =  ~X, lat =  ~Y, \n                          color = ~pal(Category),\n                          opacity = .7, radius  = 1) %\u003e%  \n        addLegend(pal = pal, values = new.crimes$Category)\n}\n\ncrime.map(c(\u0022SEX OFFENSES FORCIBLE\u0022, \u0022PROSTITUTION\u0022,\u0022DRUNKENNESS\u0022), n = 1000)\n\n```","languageName":"R","htmlOutputFileUrl":"https://www.kaggle.io/svf/164733/fa517607688d7dc423711c4b9e9a5e75/__results__.html","outputFiles":[{"size":889131,"fullPath":null,"previewUrl":"/kernels/preview.json/164733/fa517607-688d-7dc4-2371-1c4b9e9a5e75/results.zip","downloadUrl":"https://www.kaggle.io/svf/164733/fa517607688d7dc423711c4b9e9a5e75/results.zip","fileType":".zip","validationErrors":"","name":"results.zip","description":null,"type":"file","children":[],"collapsed":false,"info":{"metrics":null},"settings":{"csvSettings":null,"bigQuerySettings":null}}],"downloadAllFilesUrl":"/kernels/svzip/164733","runInfo":{"isValidStatus":true,"failureMessage":"","exitCode":0,"succeeded":true,"dockerImageName":"kaggle/rstats","dockerfileUrl":"https://github.com/Kaggle/docker-rstats/blob/master/Dockerfile","dockerHubUrl":"https://registry.hub.docker.com/u/kaggle/rstats/","dockerImageId":"1ec72fc619bdb2905b44e872fd5afe186fd709b6a9bdd3182c8328a97fb693d5","timeoutExceeded":false,"runTimeSeconds":18.4273307323456,"usedAllSpace":false,"queuedSeconds":0.26,"outputSizeBytes":3657853},"versionHistory":[{"id":164733,"isForkParent":false,"isNotebook":false,"languageName":"R","lastRunTime":"2016-02-23T05:40:24.183Z","linesChangedFromPrevious":0,"linesDeletedFromPrevious":0,"linesInsertedFromPrevious":0,"outputFilesTotalSizeBytes":4546984,"runInfo":{"dockerfileUrl":"https://github.com/Kaggle/docker-rstats/blob/master/Dockerfile","dockerHubUrl":"https://registry.hub.docker.com/u/kaggle/rstats/","dockerImageId":"1ec72fc619bdb2905b44e872fd5afe186fd709b6a9bdd3182c8328a97fb693d5","dockerImageName":"kaggle/rstats","exitCode":0,"failureMessage":"","isValidStatus":true,"runTimeSeconds":18.4273307323456,"succeeded":true,"timeoutExceeded":false,"usedAllSpace":false},"status":"complete","title":"Interactive Crime Map of San Francisco","url":"/apapiu/function-for-interactive-map?scriptVersionId=164733","versionNumber":10,"hasVersionNumber":true},{"id":164667,"isForkParent":false,"isNotebook":false,"languageName":"R","lastRunTime":"2016-02-23T00:20:49.153Z","linesChangedFromPrevious":5,"linesDeletedFromPrevious":0,"linesInsertedFromPrevious":1,"outputFilesTotalSizeBytes":4546986,"runInfo":{"dockerfileUrl":"https://github.com/Kaggle/docker-rstats/blob/master/Dockerfile","dockerHubUrl":"https://registry.hub.docker.com/u/kaggle/rstats/","dockerImageId":"1ec72fc619bdb2905b44e872fd5afe186fd709b6a9bdd3182c8328a97fb693d5","dockerImageName":"kaggle/rstats","exitCode":0,"failureMessage":"","isValidStatus":true,"runTimeSeconds":17.6716666221619,"succeeded":true,"timeoutExceeded":false,"usedAllSpace":false},"status":"complete","title":"Function for Interactive Map","url":"/apapiu/function-for-interactive-map?scriptVersionId=164667","versionNumber":9,"hasVersionNumber":true},{"id":164666,"isForkParent":false,"isNotebook":false,"languageName":"R","lastRunTime":"2016-02-23T00:18:37.17Z","linesChangedFromPrevious":1,"linesDeletedFromPrevious":4,"linesInsertedFromPrevious":11,"outputFilesTotalSizeBytes":4506720,"runInfo":{"dockerfileUrl":"https://github.com/Kaggle/docker-rstats/blob/master/Dockerfile","dockerHubUrl":"https://registry.hub.docker.com/u/kaggle/rstats/","dockerImageId":"1ec72fc619bdb2905b44e872fd5afe186fd709b6a9bdd3182c8328a97fb693d5","dockerImageName":"kaggle/rstats","exitCode":0,"failureMessage":"","isValidStatus":true,"runTimeSeconds":16.3483724594116,"succeeded":true,"timeoutExceeded":false,"usedAllSpace":false},"status":"complete","title":"Function for Interactive Map","url":"/apapiu/function-for-interactive-map?scriptVersionId=164666","versionNumber":8,"hasVersionNumber":true},{"id":164649,"isForkParent":false,"isNotebook":false,"languageName":"R","lastRunTime":"2016-02-22T23:55:44.677Z","linesChangedFromPrevious":0,"linesDeletedFromPrevious":0,"linesInsertedFromPrevious":0,"outputFilesTotalSizeBytes":4507311,"runInfo":{"dockerfileUrl":"https://github.com/Kaggle/docker-rstats/blob/master/Dockerfile","dockerHubUrl":"https://registry.hub.docker.com/u/kaggle/rstats/","dockerImageId":"1ec72fc619bdb2905b44e872fd5afe186fd709b6a9bdd3182c8328a97fb693d5","dockerImageName":"kaggle/rstats","exitCode":0,"failureMessage":"","isValidStatus":true,"runTimeSeconds":17.7771809101105,"succeeded":true,"timeoutExceeded":false,"usedAllSpace":false},"status":"complete","title":"Function for Interactive Map","url":"/apapiu/function-for-interactive-map?scriptVersionId=164649","versionNumber":7,"hasVersionNumber":true},{"id":164648,"isForkParent":false,"isNotebook":false,"languageName":"R","lastRunTime":"2016-02-22T23:54:59.95Z","linesChangedFromPrevious":2,"linesDeletedFromPrevious":3,"linesInsertedFromPrevious":0,"outputFilesTotalSizeBytes":4507311,"runInfo":{"dockerfileUrl":"https://github.com/Kaggle/docker-rstats/blob/master/Dockerfile","dockerHubUrl":"https://registry.hub.docker.com/u/kaggle/rstats/","dockerImageId":"1ec72fc619bdb2905b44e872fd5afe186fd709b6a9bdd3182c8328a97fb693d5","dockerImageName":"kaggle/rstats","exitCode":0,"failureMessage":"","isValidStatus":true,"runTimeSeconds":17.8089518547058,"succeeded":true,"timeoutExceeded":false,"usedAllSpace":false},"status":"complete","title":"Function for Interactive Map","url":"/apapiu/function-for-interactive-map?scriptVersionId=164648","versionNumber":6,"hasVersionNumber":true},{"id":164645,"isForkParent":false,"isNotebook":false,"languageName":"R","lastRunTime":"2016-02-22T23:52:22.957Z","linesChangedFromPrevious":2,"linesDeletedFromPrevious":1,"linesInsertedFromPrevious":0,"outputFilesTotalSizeBytes":31950276,"runInfo":{"dockerfileUrl":"https://github.com/Kaggle/docker-rstats/blob/master/Dockerfile","dockerHubUrl":"https://registry.hub.docker.com/u/kaggle/rstats/","dockerImageId":"1ec72fc619bdb2905b44e872fd5afe186fd709b6a9bdd3182c8328a97fb693d5","dockerImageName":"kaggle/rstats","exitCode":0,"failureMessage":"","isValidStatus":true,"runTimeSeconds":22.9401817321777,"succeeded":true,"timeoutExceeded":false,"usedAllSpace":false},"status":"complete","title":"Function for Interactive Map","url":"/apapiu/function-for-interactive-map?scriptVersionId=164645","versionNumber":5,"hasVersionNumber":true},{"id":164644,"isForkParent":false,"isNotebook":false,"languageName":"R","lastRunTime":"2016-02-22T23:47:27.403Z","linesChangedFromPrevious":1,"linesDeletedFromPrevious":0,"linesInsertedFromPrevious":0,"outputFilesTotalSizeBytes":31950900,"runInfo":{"dockerfileUrl":"https://github.com/Kaggle/docker-rstats/blob/master/Dockerfile","dockerHubUrl":"https://registry.hub.docker.com/u/kaggle/rstats/","dockerImageId":"1ec72fc619bdb2905b44e872fd5afe186fd709b6a9bdd3182c8328a97fb693d5","dockerImageName":"kaggle/rstats","exitCode":0,"failureMessage":"","isValidStatus":true,"runTimeSeconds":22.7882940769196,"succeeded":true,"timeoutExceeded":false,"usedAllSpace":false},"status":"complete","title":"Function for Interactive Map","url":"/apapiu/function-for-interactive-map?scriptVersionId=164644","versionNumber":4,"hasVersionNumber":true},{"id":164642,"isForkParent":false,"isNotebook":false,"languageName":"R","lastRunTime":"2016-02-22T23:45:48.253Z","linesChangedFromPrevious":0,"linesDeletedFromPrevious":0,"linesInsertedFromPrevious":2,"outputFilesTotalSizeBytes":31989828,"runInfo":{"dockerfileUrl":"https://github.com/Kaggle/docker-rstats/blob/master/Dockerfile","dockerHubUrl":"https://registry.hub.docker.com/u/kaggle/rstats/","dockerImageId":"1ec72fc619bdb2905b44e872fd5afe186fd709b6a9bdd3182c8328a97fb693d5","dockerImageName":"kaggle/rstats","exitCode":0,"failureMessage":"","isValidStatus":true,"runTimeSeconds":23.9449396133423,"succeeded":true,"timeoutExceeded":false,"usedAllSpace":false},"status":"complete","title":"Function for Interactive Map","url":"/apapiu/function-for-interactive-map?scriptVersionId=164642","versionNumber":3,"hasVersionNumber":true},{"id":164639,"isForkParent":false,"isNotebook":false,"languageName":"R","lastRunTime":"2016-02-22T23:42:46.443Z","linesChangedFromPrevious":1,"linesDeletedFromPrevious":0,"linesInsertedFromPrevious":0,"outputFilesTotalSizeBytes":27442700,"runInfo":{"dockerfileUrl":"https://github.com/Kaggle/docker-rstats/blob/master/Dockerfile","dockerHubUrl":"https://registry.hub.docker.com/u/kaggle/rstats/","dockerImageId":"1ec72fc619bdb2905b44e872fd5afe186fd709b6a9bdd3182c8328a97fb693d5","dockerImageName":"kaggle/rstats","exitCode":0,"failureMessage":"","isValidStatus":true,"runTimeSeconds":21.6044983863831,"succeeded":true,"timeoutExceeded":false,"usedAllSpace":false},"status":"complete","title":"Function for Interactive Map","url":"/apapiu/function-for-interactive-map?scriptVersionId=164639","versionNumber":2,"hasVersionNumber":true},{"id":164638,"isForkParent":false,"isNotebook":false,"languageName":"R","lastRunTime":"2016-02-22T23:42:23.457Z","linesChangedFromPrevious":0,"linesDeletedFromPrevious":0,"linesInsertedFromPrevious":0,"outputFilesTotalSizeBytes":0,"runInfo":{"dockerfileUrl":"https://github.com/Kaggle/docker-rstats/blob/master/Dockerfile","dockerHubUrl":"https://registry.hub.docker.com/u/kaggle/rstats/","dockerImageId":"1ec72fc619bdb2905b44e872fd5afe186fd709b6a9bdd3182c8328a97fb693d5","dockerImageName":"kaggle/rstats","exitCode":1,"failureMessage":"The script returned with an error. See the log for more information.","isValidStatus":true,"runTimeSeconds":0.850879907608032,"succeeded":false,"timeoutExceeded":false,"usedAllSpace":false},"status":"error","title":"Function for Interactive Map","url":"/apapiu/function-for-interactive-map?scriptVersionId=164638","versionNumber":1,"hasVersionNumber":true}],"sanitizeHtml":false,"initialScriptVersionId":164733,"initialTab":null,"baseUrl":"/apapiu/function-for-interactive-map","toggleScriptIsHiddenUrl":"/kernels/40240/hidden/toggle","scriptIsHidden":false,"kernelDeletionUrl":null,"isAdmin":false,"datasetHidden":false,"readOnly":false,"scriptIsLanguageTemplate":false,"rerunScriptUrl":"/kernels/rerun?id=164733","dataSources":[{"imageUrl":"https://kaggle2.blob.core.windows.net/competitions/kaggle/4458/logos/thumb76_76.png","sourceUrl":"/c/sf-crime","slug":"sf-crime","lastUpdated":"2015-06-02T20:51:28.977Z","overview":"Predict the category of crimes that occurred in the city by the bay ","sourceType":"competition","sourceId":4458,"descriptionMimeType":"","deleted":false,"name":"San Francisco Crime Classification","description":"\u003cp\u003eThis dataset contains incidents derived from SFPD Crime Incident Reporting system. The data ranges from 1/1/2003 to 5/13/2015. The training set and test set rotate every week, meaning week 1,3,5,7... belong to test set, week 2,4,6,8 belong to training set. \u003c/p\u003e\r\n\u003cp\u003e\u003cimg src=\u0022https://kaggle2.blob.core.windows.net/competitions/kaggle/4458/media/Screen%20Shot%202015-05-28%20at%205.23.48%20PM.png\u0022 alt=\u0022\u0022 width=\u0022650\u0022 height=\u0022352\u0022 /\u003e\u003c/p\u003e\r\n\u003ch2\u003eData fields\u003c/h2\u003e\r\n\u003cul\u003e\r\n\u003cli\u003e\u003cstrong\u003eDates\u003c/strong\u003e - timestamp of the crime incident\u003c/li\u003e\r\n\u003cli\u003e\u003cstrong\u003eCategory\u003c/strong\u003e - category of the crime incident (only in train.csv). \u003cstrong\u003eThis is the target variable you are going to predict.\u003c/strong\u003e\u003c/li\u003e\r\n\u003cli\u003e\u003cstrong\u003eDescript\u003c/strong\u003e - detailed description of the crime incident (only in train.csv)\u003c/li\u003e\r\n\u003cli\u003e\u003cstrong\u003eDayOfWeek\u003c/strong\u003e - the day of the week\u003c/li\u003e\r\n\u003cli\u003e\u003cstrong\u003ePdDistrict\u003c/strong\u003e - name of the Police Department District\u003c/li\u003e\r\n\u003cli\u003e\u003cstrong\u003eResolution\u003c/strong\u003e - how the crime incident was resolved (only in train.csv)\u003c/li\u003e\r\n\u003cli\u003e\u003cstrong\u003eAddress\u003c/strong\u003e - the approximate street address of the crime incident \u003c/li\u003e\r\n\u003cli\u003e\u003cstrong\u003eX\u003c/strong\u003e - Longitude\u003c/li\u003e\r\n\u003cli\u003e\u003cstrong\u003eY\u003c/strong\u003e - Latitude\u003c/li\u003e\r\n\u003c/ul\u003e","type":"dataSource","children":[{"size":2498027,"fullPath":"../input/sampleSubmission.csv","previewUrl":"/Scripts/ScriptCompetitionInputFilePreview?competitionId=4458\u0026relativePath=sampleSubmission.csv","downloadUrl":"/c/sf-crime/download/sampleSubmission.csv","fileType":".csv","validationErrors":null,"name":"sampleSubmission.csv","description":null,"type":"file","children":[],"collapsed":false,"info":{"metrics":null},"settings":{"csvSettings":null,"bigQuerySettings":null}},{"size":19665660,"fullPath":"../input/test.csv","previewUrl":"/Scripts/ScriptCompetitionInputFilePreview?competitionId=4458\u0026relativePath=test.csv","downloadUrl":"/c/sf-crime/download/test.csv","fileType":".csv","validationErrors":null,"name":"test.csv","description":null,"type":"file","children":[],"collapsed":false,"info":{"metrics":null},"settings":{"csvSettings":null,"bigQuerySettings":null}},{"size":23166068,"fullPath":"../input/train.csv","previewUrl":"/Scripts/ScriptCompetitionInputFilePreview?competitionId=4458\u0026relativePath=train.csv","downloadUrl":"/c/sf-crime/download/train.csv","fileType":".csv","validationErrors":null,"name":"train.csv","description":null,"type":"file","children":[],"collapsed":false,"info":{"metrics":null},"settings":{"csvSettings":null,"bigQuerySettings":null}}],"collapsed":false,"info":{"metrics":null},"settings":{"csvSettings":null,"bigQuerySettings":null}}],"forksBaseUrl":"/kernels/forks/40240/0","totalForks":2,"newForkUrl":"/Scripts/NewScriptAsync?forkParentScriptVersionId=164733\u0026userName=apapiu","isNotebook":true,"isRMarkdown":true,"scriptId":40240,"scriptVersionId":164733,"scriptVersionHasError":false,"userCanEditScript":false,"showSubmitToCompButtons":false,"submitToCompUrl":"/competitions/kernels/submit","competitionName":"San Francisco Crime Classification","currentScriptVersionIsBusy":false,"statusCallbackUrl":"/kernels/status?id=164733","forkParentUrl":"","forkParentTitle":null,"forkParentAuthorUrl":null,"forkParentAuthorDisplayName":null,"forkDiffUrl":"/apapiu/function-for-interactive-map/versions#base=0\u0026new=164733","forkDiffLinesChanged":0,"forkDiffLinesDeleted":0,"forkDiffLinesInserted":0,"voteButton":{"totalVotes":3,"hasAlreadyVotedUp":false,"hasAlreadyVotedDown":false,"canUpvote":true,"canDownvote":false,"voteUpUrl":"/kernels/vote?id=40240","voteDownUrl":null,"voters":[{"avatarThumbnailUrl":"https://kaggle2.blob.core.windows.net/avatars/thumbnails/400262-fb.jpg","displayName":"Alexandru Papiu","userName":"apapiu","profileUrl":"/apapiu","tier":"Master","tierInt":3,"userId":400262},{"avatarThumbnailUrl":"https://kaggle2.blob.core.windows.net/avatars/thumbnails/993-fb.jpg","displayName":"Ben Hamner","userName":"benhamner","profileUrl":"/benhamner","tier":"Staff","tierInt":5,"userId":993},{"avatarThumbnailUrl":"https://kaggle2.blob.core.windows.net/avatars/thumbnails/293541-fb.jpg","displayName":"Tom Boatwright","userName":"tboats","profileUrl":"/tboats","tier":"Contributor","tierInt":1,"userId":293541}],"currentUserInfo":null,"showVoters":true,"alwaysShowVoters":true},"dateUpdated":"2016-02-23T05:40:24.443Z","userName":"Alexandru Papiu","userUrl":"/apapiu","userAvatarImageUrl":"https://kaggle2.blob.core.windows.net/avatars/thumbnails/400262-fb.jpg","parentName":"San Francisco Crime Classification","parentUrl":"/c/sf-crime","scriptLanguage":"R notebook","totalViews":728,"title":"Interactive Crime Map of San Francisco","titleUrl":"/apapiu/function-for-interactive-map","thumbnailImageUrl":"/static/images/no-datasource.png","isPrivate":false,"isCodeSubmission":false,"submission":null,"menuLinks":[{"href":null,"text":"Report","title":"Notebook","tab":"notebook","count":null,"showZeroCountExplicitly":false},{"href":null,"text":"Code","title":"Code","tab":"code","count":null,"showZeroCountExplicitly":false},{"href":null,"text":"Data","title":"Data","tab":"data","count":1,"showZeroCountExplicitly":false},{"href":null,"text":"Output","title":"Output","tab":"output","count":1,"showZeroCountExplicitly":false},{"href":null,"text":"Comments","title":"Comments","tab":"comments","count":0,"showZeroCountExplicitly":true},{"href":null,"text":"Log","title":"Log","tab":"log","count":null,"showZeroCountExplicitly":false},{"href":null,"text":"Versions","title":"Versions","tab":"versions","count":10,"showZeroCountExplicitly":false},{"href":null,"text":"Forks","title":"Forks","tab":"forks","count":2,"showZeroCountExplicitly":false}],"rightMenuLinks":[],"callToAction":{"href":"/Scripts/NewScriptAsync?forkParentScriptVersionId=164733\u0026userName=apapiu","text":"Fork Script","title":"Fork Script","tab":null,"count":null,"showZeroCountExplicitly":false},"topic":{"allowAttachments":false,"canDownvote":false,"comment":null,"commentList":null,"id":null,"isDeleted":false,"isLocked":false,"isPinned":false,"isSpammed":false,"isSubscribed":false,"parentName":null,"parentUrl":null,"title":null},"medal":null,"categories":{"categories":[],"type":"script"},"canSeeUpvoteSuggestion":true,"suggestions":[{"entityType":"kernel","entityId":5039,"title":"San Francisco Top Crimes Map","entityUrl":"/benhamner/san-francisco-top-crimes-map","thumbnailImageUrl":"/static/images/competition-noimage-thumb.png","owner":{"id":993,"imageUrl":"https://kaggle2.blob.core.windows.net/avatars/thumbnails/993-fb.jpg","isOrganization":false,"name":"Ben Hamner","profileUrl":"/benhamner","slug":"benhamner","maxFileSizeBytes":null}},{"entityType":"kernel","entityId":34393,"title":"Mapping and Visualizing Violent Crime","entityUrl":"/mircat/violent-crime-mapping","thumbnailImageUrl":"/static/images/competition-noimage-thumb.png","owner":{"id":208885,"imageUrl":"https://kaggle2.blob.core.windows.net/avatars/thumbnails/208885-fb.jpg","isOrganization":false,"name":"Mir Henglin","profileUrl":"/mircat","slug":"mircat","maxFileSizeBytes":null}},{"entityType":"kernel","entityId":6560,"title":"a history of crime","entityUrl":"/swbevan/a-history-of-crime-python","thumbnailImageUrl":"/static/images/competition-noimage-thumb.png","owner":{"id":278304,"imageUrl":"https://kaggle2.blob.core.windows.net/avatars/thumbnails/278304-gr.jpg","isOrganization":false,"name":"Simon","profileUrl":"/swbevan","slug":"swbevan","maxFileSizeBytes":null}},{"entityType":"kernel","entityId":7079,"title":"Vehicle Thefts or Jerry Rice Jubilation?","entityUrl":"/eyecjay/vehicle-thefts-or-jerry-rice-jubilation","thumbnailImageUrl":"/static/images/competition-noimage-thumb.png","owner":{"id":227880,"imageUrl":"https://kaggle2.blob.core.windows.net/avatars/thumbnails/227880-gr.jpg","isOrganization":false,"name":"icj","profileUrl":"/eyecjay","slug":"eyecjay","maxFileSizeBytes":null}},{"entityType":"kernel","entityId":10113,"title":"Function to map any crime","entityUrl":"/captcalculator/function-to-map-any-crime","thumbnailImageUrl":"/static/images/competition-noimage-thumb.png","owner":{"id":379860,"imageUrl":"https://kaggle2.blob.core.windows.net/avatars/thumbnails/379860-fb.jpg","isOrganization":false,"name":"Troy Walters","profileUrl":"/captcalculator","slug":"captcalculator","maxFileSizeBytes":null}}]});performance && performance.mark && performance.mark("ScriptViewer.componentCouldBootstrap");</script>


<form action="/apapiu/function-for-interactive-map" id="__AjaxAntiForgeryForm" method="post"><input name="__RequestVerificationToken" type="hidden" value="VGlzdD632JFymIMcyTUe0QBh-dODWp3CESJpwlSGkTkABkYrV49qm43765QD-CeXUsRRFY1-HkKmOJ-LzT3R8LzDhLM1" /></form>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        "HTML-CSS": {
            preferredFont: "TeX",
            availableFonts: ["STIX", "TeX"],
            linebreaks: {
                automatic: true
            },
            EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50)
        },
        tex2jax: {
            inlineMath: [["\\(", "\\)"], ["\\\\(", "\\\\)"]],
            displayMath: [["$$", "$$"], ["\\[", "\\]"]],
            processEscapes: true,
            ignoreClass: "tex2jax_ignore|dno"
        },
        TeX: {
            noUndefined: {
                attributes: {
                    mathcolor: "red",
                    mathbackground: "#FFEEEE",
                    mathsize: "90%"
                }
            }
        },
        Macros: {
            href: "{}"
        },
        skipStartupTypeset: true,
        messageStyle: "none"
    });
</script>

<script type="text/javascript" async crossorigin="anonymous" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>



    </div>

        <div class="site-layout__footer">
            <footer class="site-footer">
    <div class="site-footer__content">
        <div class="site-footer__copyright">
            <span>&copy; 2017 Kaggle Inc</span>
        </div>
        <nav class="site-footer__nav">
            <a href="/team">Our Team</a>
            <a href="/terms">Terms</a>
            <a href="/privacy">Privacy</a>
            <a href="/contact">Contact/Support</a>
        </nav>
        <nav class="site-footer__social">
            <div data-component-name="SocialIcons"></div><script>var Kaggle=window.Kaggle||{};Kaggle.State=Kaggle.State||[];Kaggle.State.push();performance && performance.mark && performance.mark("SocialIcons.componentCouldBootstrap");</script>
        </nav>
    </div>
</footer>

        </div>
</div>



<script type="text/javascript">
    var Kaggle = Kaggle || {};

    Kaggle.Current = {
        hasJupyterNotebookEditor: true,
        hasEnvironmentVariables: false,
        hasInteractiveScripts: false,
        hasStandaloneKernelProxy: true,
        hasKernelsAsDataSources: true,
        antiForgeryToken: 'HOD5pmfMetTIfxg2nQWMJonYerN7cunERSZmepwIQdBF497Go93jXpoZ5UH7a_vG6-rjYp7RmfSFKvD2HUkQwkoEKt41',
        isAnonymous: true,
        isFullScreen: false,
        
        
        
        
        
        
        
        
    }
        Kaggle.Current.log = function(){};
        Kaggle.Current.warn = function(){};
    var decodeUserDisplayName = function () {
        var escapedUserDisplayName = Kaggle.Current.userDisplayNameEscaped;
        try {
          var textVersion = new DOMParser().parseFromString(escapedUserDisplayName, "text/html").documentElement.textContent;
          if (textVersion) {
              return textVersion;
          }
        } catch(ex) {}
        
        return escapedUserDisplayName;
    }
    Kaggle.Current.userDisplayName = decodeUserDisplayName();
</script>





<script type="text/javascript">
    var Kaggle = Kaggle || {};
    Kaggle.PageMessages = [];
</script>


<script src="/content/v/5dbea6ee9ce1/shared/js/kaggle.prism.min.js"></script>










    <script src="/static/assets/app.js?v=f64d55c4323b"></script>
    
        <script>
            (function() {
                if ('serviceWorker' in navigator) {
                    
                    navigator.serviceWorker.register("/static/assets/service-worker.js").then(function(reg) {
                        
                        reg.onupdatefound = function() {
                            
                            var installingWorker = reg.installing;
                            installingWorker.onstatechange = function() {
                                switch (installingWorker.state) {
                                case 'installed':
                                    if (navigator.serviceWorker.controller) {
                                        
                                        console.log('New or updated content is available.');
                                    } else {
                                        
                                        console.log('Content is now available offline!');
                                    }
                                    break;
                                case 'redundant':
                                    console.error('The installing service worker became redundant.');
                                    break;
                                }
                            };
                        };
                    }).catch(function(e) {
                      console.error('Error during service worker registration:', e);
                    });
                }
            })();
        </script>
</body>
</html>
