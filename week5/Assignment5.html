<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Assignment 5</title>

    <!-- Set (CSS) style: -->
    <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
    <style>
        .page-wrap {
            text-align: left;
            width: 1200px;
            margin: 0 auto;
        }
        body {
            text-align: center;
            font-family: 'Montserrat', sans-serif;
        }
        svg {
            border: 1px solid grey;
        }
    
        #barplot {
            border:1px solid grey;
        }

        h3 {
            font-style: italic;
            font-weight: bold;
            font-size: 20px;
        };
        
  
    </style>


    <!-- D3 & JS -->
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <!-- simple diagrams -->
    <script src="stacked_bars.js"></script>
    <script src="time_profile.js"></script>
    <!-- TopoJSON: <script src="https://d3js.org/topojson.v3.min.js"></script> -->
    <script src="drawmap.js"></script>
    <script src="san_francisco.js"></script>

    <script>
        d3.select(window).on('load', init);

        function init() {
            var year_category;
            var time_of_day;
            var crime_points;
            d3.json("sf_crime.geojson", function (data) {
                year_category = data.features.map(function (t) {
                    var p = t.properties;
                    return {year: +p["Dates"].slice(0,4),
                            category: p["Category"]};
                });
                //stacked_bars(year_category);

                time_of_day = data.features.map(function (t) {
                    var p = t.properties;
                    return +p["Dates"].slice(11, 13); // hour, when crime happened
                });
                time_profile(time_of_day);

                crime_points = data.features.map(function (t) {
                    var p = t.properties;
                    return {lon: +p["X"], lat: +p["Y"], cat: +p["Category"]};
                });
                drawMap(crime_points);
            });

        }
    </script>
</head>
<body>

<h1>
    <u>Assignment 5</u>
    <br>
    by Johannes Jacob, Tobias Ludwig and Mona Timmermann
</h1>

<div class="page-wrap">
    <h2>Introduction</h2>
    We have focused on two research questions and used different ways of visualising the data
    on crimes in the city of San Francisco to provide answers to these questions.
    The case and data was provided by <a href="https://www.kaggle.com/c/sf-crime">Kaggle</a>
    and ranges from 01/01/2003 to 13/05/2015.

    <h2>Research Questions</h2>
    <ol>
        <li>Are there differences in the amount of crimes during the different hours of the day?</li>
        <li>Are there areas of San Francisco where more crimes are committed than in other areas?</li>

    </ol>

    <h2>Visualisations and Insights</h2>

    <h3> a. The role of the time of the day</h3>
    In the following graph one can see that there is a difference in the amount
    of crimes throughout the day. As expected, there are more crimes being committed
    in the afternoon and evenings, less during the late night/early morning. However,
    it is not yet clear whether there are also differences in the kind of crimes
    throughout the day. <br><br>
    <div style="display: inline-block">
    <svg style="width:800px; height:400px" id="time_profile"></svg>
    </div>

    <h3> b. Location of crimes in San Francisco</h3>
    The following map is rather basic and not interactive. It depicts where crimes have been committed in San Francisco
    and shows clearly that the more north-eastern districts are more affected by crimes.
    However, it again does not make clear which crimes have been committed in the different areas.<br><br>
    <svg id="map"></svg>

    <h3> c. Location of crimes in San Francisco with Interactivity</h3>
    The following map allows to select only a subset of the different kinds of crimes through a
    combo box to get a feeling of the kind of crimes which occur in different
    areas of San Francisco and allows to find out which crimes a dot refers to
    by hovering over the circles in the map. It is an adaption of the previously
    created map.<br><br>
    <svg id="map_selections"></svg>


    <h3> d. Change in crime categories over the years</h3>
    The following visualisation helps to find out whether there has been a change
    in the kinds of crimes that occur over the different years. E.g., is there a specific
    crime that occurs more and more often?

    <h3> e. Stacked Barplot</h3>
    <svg style="width:800px; height:500px" id="barplot"></svg>


</div>

</body>
</html>