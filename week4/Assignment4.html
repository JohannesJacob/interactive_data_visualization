<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Show of Hands</title>

    <!-- Set (CSS) style: -->
    <style>
        svg {
            border: 1px solid grey;
        }

        .axis {
            font-size: 80%;
            font-weight: bold;
        }

        .axis text {
            fill: black;
        }

    </style>



    <!-- D3 & JS -->
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="two_panel.js"></script>

    <script>
        d3.select(window).on('load', init);

        var handData = []; // store the hand data globally, we need to have access always when we request a new draw
        var xVar, yVar; // columns

        function init() {
            // SCATTER PLOT (PCA):
            d3.text("hands_pca.csv",
                // transform numeric strings into numerics:
                function (text) {
                    var data = d3.csvParseRows(text).map(function (row, id) {
                        var xy = [+row[xVar], +row[yVar]]; // only are the first two coordinates are needed for projection
                        // adding the row index as an id is needed for accessing the corresponding hand data when clicked
                        return {id: id, xy: xy};
                    });
                    // call Function to draw the points in the left panel:
                    drawPoints(data);
                });


            // HANDS PLOT:
            d3.text("hands.csv",
                function (text) {
                    handData = d3.csvParseRows(text).map(function (row) {
                        var xyValues = row.map(function (value) {
                            return +value;
                        });
                        return d3.zip(xyValues.slice(0,  56),
                                      xyValues.slice(56, 112));
                    });
                    // call Function to draw the hand in the right panel
                    drawHand(0); // first id is selected first
                });
        }

    </script>


</head>
<body>
<!-- To check the data values: -->
    <p>
        Choose a data point in the PCA-Panel (by clicking on it). Id is: <span id="id_value">0</span>
    </p>
    <p>
        Choose
    </p>

<!-- Set up two svg panels that are displayed next to each other (vertically or horizontally responsively)
One will show the hand, the other the pca-points -->
<div style="display: inline-block">
    <svg width="700" height="700" id="points"></svg>
    <svg width="700" height="700" id="hand"></svg>
</div>

<p id="outlierPar">
    The outliers...
</p>

<script>
    d3.select("#outlierPar")
        .on("mousemove", function (d) {
            d3.selectAll(".outlier")
                .attr("fill", "red");
        })
        .on("mouseout", function (d) {
            d3.selectAll(".outlier")
                .attr("fill", "lightblue");
        });
</script>
</body>
</html>
